# ν• λ³€ν™, Casting

## Casting
ν•λ³€ν™, Casting μ΄λ€ λ°μ΄ν„° νƒ€μ…μ„ λ‹¤λ¥Έ νƒ€μ…μΌλ΅ λ³€ν™ν•λ” κ³Όμ •μ„ μλ―Έν•©λ‹λ‹¤.

Java μ—μ„λ” `κΈ°λ³Έν•(Primitive Type)` κ³Ό `μ°Έμ΅°ν•(Reference Type)` μ— λ€ν•΄ ν• λ³€ν™μ΄ κ°€λ¥ν•©λ‹λ‹¤.

## 1. κΈ°λ³Έν• ν• λ³€ν™

### 1. λ¬µμ‹μ  ν• λ³€ν™ (`Implicit Casting`, μλ™ ν• λ³€ν™)
- `μ‘μ€ ν¬κΈ°μ νƒ€μ… β†’ ν° ν¬κΈ°μ νƒ€μ… λ³€ν™ (μ•μ „ν• λ³€ν™μ΄λ―€λ΅ μλ™μΌλ΅ μ²λ¦¬λ¨)`
- λ°μ΄ν„° μ†μ‹¤μ΄ λ°μƒν•μ§€ μ•μµλ‹λ‹¤.

```java
int num = 10;
double d = num;  // int β†’ double μλ™ λ³€ν™
System.out.println(d); // 10.0
```

### μλ™ λ³€ν™μ΄ κ°€λ¥ν• κ²½μ°
|μ‘μ€ νƒ€μ…|β†’|ν° νƒ€μ…|
|---|-|---|
|byte	|β†’|	short, int, long, float, double|
|short	|β†’|	int, long, float, double|
|int	|β†’|	long, float, double|
|long	|β†’|	float, double|
|float	|β†’|	double|

### 2. λ…μ‹μ  ν• λ³€ν™ (Explicit Casting, κ°•μ  ν• λ³€ν™)
- `ν° ν¬κΈ°μ νƒ€μ… β†’ μ‘μ€ ν¬κΈ°μ νƒ€μ… λ³€ν™`
- `λ°μ΄ν„° μ†μ‹¤`μ΄ λ°μƒν•  μ μμΌλ―€λ΅ λ…μ‹μ μΌλ΅ ν• λ³€ν™ν•΄μ•Ό ν•©λ‹λ‹¤.
- (νƒ€μ…)μ„ μ‚¬μ©ν•μ—¬ λ³€ν™ν•©λ‹λ‹¤.

```java
double d = 10.99;
int num = (int) d;  // double β†’ int κ°•μ  λ³€ν™
System.out.println(num); // 10 (μ†μμ  μ†μ‹¤)
```
```java
int largeNumber = 130;
byte smallNumber = (byte) largeNumber;
System.out.println(smallNumber); // -126 (λ°μ΄ν„° μ†μ‹¤ λ°μƒ!)
```
> byteμ λ²”μ„λ” -128 ~ 127 μ΄λ―€λ΅ 130μ„ λ³€ν™ν•  κ²½μ° μ¤λ²„ν”λ΅μ°κ°€ λ°μƒν•©λ‹λ‹¤.

## 2. μ°Έμ΅°ν•(Reference Type) ν• λ³€ν™
μ°Έμ΅°ν•(κ°μ²΄ νƒ€μ…) κ°„ ν• λ³€ν™μ€ μƒμ† κ΄€κ³„κ°€ μμ–΄μ•Ό κ°€λ¥ν•λ©°, `μ—…μΊμ¤ν…(Upcasting)`κ³Ό `λ‹¤μ΄μΊμ¤ν…(Downcasting)`μΌλ΅ λ‚λ‰©λ‹λ‹¤.

### 1. μ—…μΊμ¤ν…(Upcasting) - μμ‹ νƒ€μ… β†’ λ¶€λ¨ νƒ€μ… (μλ™ λ³€ν™)
- μμ‹ ν΄λμ¤ κ°μ²΄λ¥Ό λ¶€λ¨ ν΄λμ¤ νƒ€μ…μΌλ΅ λ³€ν™
- μλ™ λ³€ν™ κ°€λ¥ (λ…μ‹μ μΈ ν• λ³€ν™ ν•„μ” μ—†μ)
- λ¶€λ¨ ν΄λμ¤μ— μ •μλ λ©”μ„λ“λ§ νΈμ¶ κ°€λ¥ν•©λ‹λ‹¤.

```java
class Animal {
    void sound() {
        System.out.println("λ™λ¬Ό μ†λ¦¬");
    }
}

class Dog extends Animal {
    void bark() {
        System.out.println("λ©λ©!");
    }
}

public class Main {
    public static void main(String[] args) {
        // μλ™ μ—…μΊμ¤ν… (Animal νƒ€μ…μΌλ΅ Dog κ°μ²΄ μ €μ¥)
        Animal animal = new Dog();
        // "λ™λ¬Ό μ†λ¦¬" (λ¶€λ¨ ν΄λμ¤ λ©”μ„λ“ μ‹¤ν–‰)
        animal.sound(); 
        // β μ»΄νμΌ μ¤λ¥ (λ¶€λ¨ νƒ€μ…μ—μ„λ” μμ‹μ λ©”μ„λ“ μ‚¬μ© λ¶κ°€λ¥)
        // animal.bark();
    }
}
```

- Dog κ°μ²΄λ¥Ό Animal νƒ€μ…μΌλ΅ λ³€ν™ (μλ™ μ—…μΊμ¤ν…)
- λ¶€λ¨ ν΄λμ¤μ λ©”μ„λ“λ§ νΈμ¶ κ°€λ¥ (μμ‹ ν΄λμ¤μ bark() λ©”μ„λ“λ” μ ‘κ·Ό λ¶κ°€)
> π’΅`μ¦‰, μ—…μΊμ¤ν…μ„ ν•λ©΄ μμ‹ ν΄λμ¤μ μ¤λ²„λΌμ΄λ”©λ λ©”μ„λ“λ” μ‹¤ν–‰λμ§€λ§, μμ‹ ν΄λμ¤μ—μ„ μƒλ΅ μ¶”κ°€λ λ©”μ„λ“λ” νΈμ¶ν•  μ μ—†μµλ‹λ‹¤.`

### 2. λ‹¤μ΄μΊμ¤ν…(Upcasting) - λ¶€λ¨ νƒ€μ… β†’ μμ‹ νƒ€μ… (κ°•μ  λ³€ν™)
- λ¶€λ¨ ν΄λμ¤ νƒ€μ…μ„ μμ‹ ν΄λμ¤ νƒ€μ…μΌλ΅ λ³€ν™ (λ…μ‹μ  ν• λ³€ν™ ν•„μ”)
- λ°νƒ€μ„ μ¤λ¥(ClassCastException) λ°μƒ κ°€λ¥

```java
public class Main {
    public static void main(String[] args) {
        Animal animal = new Dog(); // μ—…μΊμ¤ν…
        Dog dog = (Dog) animal; // λ‹¤μ΄μΊμ¤ν… (λ…μ‹μ  λ³€ν™)
        dog.bark(); // "λ©λ©!" (μμ‹ ν΄λμ¤ λ©”μ„λ“ νΈμ¶ κ°€λ¥)
    }
}
```
```java
Animal animal = new Animal();
Dog dog = (Dog) animal; // β ClassCastException λ°μƒ
```

### μ£Όμν• μ 
- `Animal` κ°μ²΄λ” `Dog` λ΅ λ³€ν™λ  μ μ—†μµλ‹λ‹¤.
- λ‹¤μ΄μΊμ¤ν… ν•  λ•λ” `instanceof` μ—°μ‚°μλ΅ νƒ€μ…μ„ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.

```java
if (animal instanceof Dog) {
    Dog dog = (Dog) animal;
    dog.bark();
} else {
    System.out.println("λ³€ν™ν•  μ μ—†μ");
}
```

### μ—…μΊμ¤ν…κ³Ό λ‹¤μ΄μΊμ¤ν… μ •λ¦¬

| κ°λ… | μ„¤λ… | μμ  |
|------|------|------|
| **μ—…μΊμ¤ν…(Upcasting)** | λ¶€λ¨ νƒ€μ…μΌλ΅ λ³€ν™ (μλ™ κ°€λ¥) | `Animal animal = new Dog();` |
| **μ¤λ²„λΌμ΄λ”©λ λ©”μ„λ“ νΈμ¶** | λ¶€λ¨μ— μ΅΄μ¬ν•λ” λ©”μ„λ“λ” μμ‹μ μ¤λ²„λΌμ΄λ”©λ λ©”μ„λ“ μ‹¤ν–‰ | `animal.sound(); // "κ°μ§–λ” μ†λ¦¬"` |
| **μμ‹μ—μ„ μ¶”κ°€λ λ©”μ„λ“λ” νΈμ¶ λ¶κ°€** | λ¶€λ¨ νƒ€μ…μ—λ” μ—†λ” λ©”μ„λ“λ” νΈμ¶ λ¶κ°€λ¥ | `animal.bark(); // β μ»΄νμΌ μ¤λ¥` |
| **λ‹¤μ΄μΊμ¤ν…(Downcasting)** | λ‹¤μ‹ μμ‹ νƒ€μ…μΌλ΅ λ³€ν™ν•΄μ•Ό νΈμ¶ κ°€λ¥ | `((Dog) animal).bark(); // "λ©λ©!"` |

## 3. μ λ„¤λ¦­κ³Ό ν• λ³€ν™

μ λ„¤λ¦­(Generics)μ„ μ‚¬μ©ν•λ©΄ ν• λ³€ν™μ„ μ¤„μΌ μ μμµλ‹λ‹¤.

### μ λ„¤λ¦­μ΄ μ—†μ„ λ•

```java
ArrayList list = new ArrayList();
list.add("Hello");
String str = (String) list.get(0); // ν• λ³€ν™ ν•„μ”
```

### μ λ„¤λ¦­μ„ μ‚¬μ©ν•λ©΄ ν• λ³€ν™ λ¶ν•„μ”
```java
ArrayList<String> list = new ArrayList<>();
list.add("Hello");
String str = list.get(0); // ν• λ³€ν™ ν•„μ” μ—†μ β…
```

> μ λ„¤λ¦­μ„ μ‚¬μ©ν•λ©΄ λ¶ν•„μ”ν• (String) ν• λ³€ν™ μ—†μ΄ νƒ€μ… μ•μ •μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤.

## Java ν• λ³€ν™(Casting) μ •λ¦¬

| μ ν• | μ„¤λ… | μμ  |
|------|------|------|
| **λ¬µμ‹μ  ν• λ³€ν™** | μ‘μ€ νƒ€μ… β†’ ν° νƒ€μ… μλ™ λ³€ν™ | `int β†’ double` |
| **λ…μ‹μ  ν• λ³€ν™** | ν° νƒ€μ… β†’ μ‘μ€ νƒ€μ… κ°•μ  λ³€ν™ (λ°μ΄ν„° μ†μ‹¤ κ°€λ¥) | `double β†’ int` |
| **μ—…μΊμ¤ν…** | μμ‹ β†’ λ¶€λ¨ λ³€ν™ (μλ™ κ°€λ¥) | `Dog β†’ Animal` |
| **λ‹¤μ΄μΊμ¤ν…** | λ¶€λ¨ β†’ μμ‹ λ³€ν™ (λ…μ‹μ  λ³€ν™ ν•„μ”, μ„ν—) | `(Dog) animal` |
| **μ λ„¤λ¦­κ³Ό ν• λ³€ν™** | μ λ„¤λ¦­μ„ μ‚¬μ©ν•λ©΄ ν• λ³€ν™ λ¶ν•„μ” | `List<String>` |

## β… κ²°λ΅ , ν• λ³€ν™μ„ μ‚¬μ©ν•λ” μ΄μ 
    ν• λ³€ν™μ€ κΈ°λ³Έν•κ³Ό μ°Έμ΅°ν•μ—μ„ μ‚¬μ©λλ©°, νƒ€μ… κ°„ λ³€ν™μ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤.
    μ—…μΊμ¤ν…μ€ μλ™ λ³€ν™λμ§€λ§, λ‹¤μ΄μΊμ¤ν…μ€ `instanceof`λ΅ ν™•μΈν•΄μ•Ό ν•©λ‹λ‹¤.
    μ λ„¤λ¦­μ„ μ‚¬μ©ν•λ©΄ λ¶ν•„μ”ν• ν• λ³€ν™μ„ μ¤„μΌ μ μμ–΄ μ½”λ“ μ•μ •μ„±μ΄ μ¦κ°€ν•©λ‹λ‹¤.

    μ¦‰, ν• λ³€ν™μ€ λ³€μμ λ°μ΄ν„° νƒ€μ…μ„ λ‹¤λ¥Έ νƒ€μ…μΌλ΅ λ³€ν™ν•λ” κ³Όμ •μ…λ‹λ‹¤. μ΄λ¥Ό μ‚¬μ©ν•λ” μ΄μ λ” λ‹¤μ–‘ν• νƒ€μ…μ„ μΌκ΄€λκ² μ²λ¦¬ν•κ³ , λ©”λ¨λ¦¬λ¥Ό ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•λ©°, λ‹¤ν•μ„±μ„ ν™μ©ν•κΈ° μ„ν•΄μ„ μ…λ‹λ‹¤.