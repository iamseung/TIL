JVM의 구조와 Java의 실행방식을 설명해주세요.

jvm은 크게 클래스 로더(class loader), 실행엔진(execution engine), 런타임 데이터 영역(runtime data area)으로 구성됩니다. 
자바 컴파일러는 우리가 자바로 작성한 .java 파일을 자바 바이트 코드인 .class파일로 컴파일 해줍니다. 
자바 가상머신은 이 바이트 코드를 실행함으로써 하드웨어나 운영체제 등과는 독립적으로 동일하게 동작할 것을 보장합니다. 
이후 jvm 을 실행하면서 클래스 로더는  .class 파일(자바 바이트 코드)을 런타임 데이터 영역에 로드해주는 역할을 합니다.

클래스 로더
(로드단계)클래스 로더는 클래스를 처음 참조할 때 해당 클래스를 로드합니다.(클래스 로더는 계층구조로 돼있어 상위 클래스 로더에 없으면 하위 클래스로더가 클래스를 로드 해줍니다. → 이 말하면 클래스 로더의 계층에 대해 물어볼 수 있음) 
(링킹단계-검증) 클래스 로드는 읽어들인 클래스가 자바 및 JVM 명세에 명시된 대로 구성돼 있는지 검증합니다. 
(링킹단계-준비)검증 단계가 끝나면 클래스가 필요로 하는 메모리 할당을하고 클래스에 정의된 필드, 메서드, 인터페이스들을 나타내는 데이터 구조를 준비합니다. 
(링킹단계-분석) 준비단계가 끝나면 클래스의 심볼릭 레퍼런스를 다이렉트 레퍼런스로 변경하며 
(초기화) 마지막으로 클래스 변수를 적절한 값으로 초기화합니다.

실행엔진이 클래스로더에 의해 런타임데이터영역에 올라온 바이트 코드를 실행하면서 애플리케이션이 실행됩니다.

런타임 데이터 영역
런타임 데이터 영역은 모든 스레드 영역이 공유하는 영역과 스레드마다 생성되는 영역으로 나뉩니다. 스레드마다 생성되는 영역은 pc register, jvm stack, native method stack입니다. 
pc register는 현재 수행중인 jvm 명령 주소를 가지고 있습니다. jvm stack은 스텍 프레임을 저장하는 스택으로 스택프레임은 메서드가 수행될 때마다 생성되고 메서드가 종료되면 제거됩니다. 
(스택 프레임에는 지역 변수 배열, 피연산자 스택, 현재 실행중인 메서드가 속한 클래스의 런타임 상수 풀에 대한 레퍼런스의 정보가 있습니다.) 
native method stack은 자바 외의 언어로 작성된 네이티브 코드를 위한 스택입니다. 모든 스레드가 공유하는 영역은 heap, method area, runtime constant pool이 있습니다. heap 영역은 인스턴스, 객체가 저장되는 공간으로 가비지 컬렉션의 대상입니다. 
method area는 jvm이 읽어들인 클래스와 인터페이스에 대한 runtime constant pool을 포함하며, 클래스의 필드와 메서드 정보, static 변수, 메서드의 바이트 코드 정보를 포함하고 있습니다. 
마지막으로 runtime constant pool은 method area에 포함되며, 각 클래스와 인터페이스의 상수 정보와 메서드와 필드에 대한 레퍼런스를 담은 테이블정보를 갖고 있습니다.

실행엔진
실행엔진은 바이트 코드를 기계어로 변경하는 두가지 방식을 사용합니다. 
첫번째는 인터프리터 방식으로 하나씩 해석하고 읽기에 실행 시 느립니다. 
두번째는 jit comiler 방식으로 인터프리터 방식으로 실행하다가 적절한 시점에 바이트 코드 전체를 컴파일 해서 캐싱하는 방식입니다. 

또한 실행엔진의 가비지 컬렉터는 heap 영역의 사용하지 않는 객체 메모리를 정리해줍니다.

URL : https://seung-seok.tistory.com/entry/Java-JVM-%EC%9D%B4%EB%9E%80