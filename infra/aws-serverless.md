# AWS Serverless

## Serverless 란

`Serverless`는 개발자가 서버를 직접 관리하지 않고도 애플리케이션을 실행할 수 있도록 해주는 클라우드 컴퓨팅 모델이다. 기존의 서버 기반 방식과 달리 `서버의 설정, 운영, 확장 등을 AWS가 자동으로 처리`해주며, 개발자는 코드 작성과 비즈니스 로직 구현에 집중할 수 있다.
<br> 서버리스를 활용하면, 백엔드를 서버에 올리는 것이 아닌 작은 함수 단으로 쪼개서 아마존에서 직접 관리하는 서버로 올리게 된다.

### Bass / Fass 차이점

`BaaS 서비스`

- 애플리케이션 개발 시 요구되는 복잡한 백엔드 기능들을 개발자가 직접 개발하지 않고 클라우드 공급자가 제공하는 서비스를 이용해 쉽고 안정적으로 구현 하는 것
- 서비스 제공자로부터 미리 만들어진 백엔드 API를 제공받아 사용하는 형태.
- 데이터 저장 및 로드, 사용자 인증, 메시징, 소셜 서비스 등의 백엔드 기능을 완성된 API로 사용할 수 있다.
- API 사용량 및 서버 사용 시간에 따라 비용을 지불한다.
- 게임 백엔드 서비스는 GBaaS (또는 클라우드 게임서버엔진), 모바일은 MBaaS라고 부른다.

 
`FaaS 서비스`

- 개발자가 사용자 정의 서버 측 로직을 작성하지만 클라우드 제공 업체가 관리를 전담하는 서버 컨테이너에서 실행 되는 서비스 기능
- 서버에서 수행될 기능들을 개발자가 직접 코드로 작성하여 등록한다.
- 실행 가능한 코드(함수)를 미리 등록해놓았다가 특정 이벤트(트리거)가 발생하면 알아서 호출 및 종료되도록 한다.
- PaaS는 전체 애플리케이션을 배포하여 서버에서 애플리케이션이 항상 실행되지만, FaaS는 애플리케이션을 더 작게 쪼갠 함수를 배포하며 작업을 마치거나 일정 시간이 지나면 종료된다는 차이점이 있다.
- 호출한 함수의 횟수와 실행 시간에 따라 비용을 지불한다.

## 서버리스의 장점

### 1. 비용 절감
- 기존 laaS, PasS 와는 다르게 실제 사용량에 대해서만 비용이 청구되므로 경제적이다.
- 이벤트 기반의 비용으로, 일정 주기, 조건 등에 함수를 호출하므로 리소스를 낭비하지 않게 되어서 비용이 저렴하다. (AWS Lambda 의 경우 함수 100만번 실행당 0.2달러)
- 자체 서버를 실행하고 관리하는 대신 필요한 만큼 클라우드 기반 컴퓨팅 시간에 대해 비용을 지불한다.

### 2. 애플리케이션의 품질에 집중 가능
- 서버에 신경 쓸 필요가 없어지므로 사용자는 개발하는 애플리케이션의 품질 향상에 좀 더 집중할 수 있다.

### 3. 높은 가용성과 유연한 확장
- 요청이 들어올때만 실행되고, 동적으로 자원을 할당하기 때문에 가용성이 높고 스케일링에 신경 쓸 필요가 없다.
- **애플리케이션은 자동으로 확장될 수 있고, 개별 서버 단위가 아닌 사용단위(처리량, 메모리)를 설정/해제하여 용량을 조절할 수 있다**.
- 동적으로 자원을 할당받아서 단기간 이벤트성 트래픽을 감당하는 경우 효과적이다.

### 4. 빠른 개발 배포
- 간단한 패키징 및 배포
- 릴리즈 주기 감소
- 높은 생상선
- 유지보수나 기능추가에 효율적이라 관리보다 개발에 집중할 수 있다.

## 서버리스의 단점

### 1. Cold Start
- 서버리스의 함수들은 요청이 없으면 수면 상태로 된다. 그러다 request 가 와서 함수를 깨우고 실행하는데 시간이 소요된다.
    - 이러한 이유로 지연이 허용되지 않는 서비스일 경우, 서버리스는 좋은 선택이 아니다.
    - 위와 같은 경우, AWS Lambda 는 어떤 함수가 자주 쓰이는지 판단해서 해당 함수를 아예 잠들지 않고 리퀘스트에 대응되도록 항상 실행 상태로 유지한다.
- 실시간 서비스에 적합하지 않다.
- 프로젝트 규모가 작다면 크게 신경쓸만한 사항은 아니지만, 규모가 커지거나 속도를 요구하는 프로젝트라면 서버리스는 좋은 선택이 아닐 수 있다.

### 2. 긴 시간을 요하는 작업에 불리함
- 서버리스는 단순 작업(댓글쓰기, 이메일 보내기 등) 에는 적합하지만, 긴 시간을 요하는 작업(동영상 업로드, 데이터 백업 등)에는 비효율적이다.
- 서버리스는 함수가 1회 호출될 때 사용할 수 있는 메모리 및 시간에 제한이 있기 때문에, 이에 따라 큰 기능을 잘게 나누어 구현해야 한다.

### 3. 로컬 데이터를 사용할 수 없다. `Stateless`
- 서버리스는 무상태(Stateless)적인 기능으로 구현되어야 한다.
- 하나의 작은 기능으로 나누어진 함수들은 요청마다 새로 가동되어 호출되기 때문에 전후 상태를 공유할 수 없기 때문이다.
- 또한 변수와 데이터의 공유가 불가능하며, 데이터를 로컬 스토리지에서 읽고 쓸 수 없다.
    - 이는 서버리스 벤더에 따라 추가 서비스를 통해 극복이 가능하지만, AWS S3, Azure Storage 등 일반적인 서버리스는 불가능하다.

### 4. 클라우드 제공 플랫폼에 심하게 종속적
- 기존 IaaS나 PaaS모델은 플랫폼을 바꾸는게 어렵지 않지만(ex. AWS에서 Google Cloud로) 서버리스는 애플리케이션의 구조 자체를 바꾸기 때문에 다른 플랫폼으로 이전하는게 굉장히 힘들다.
- 이를 클라우드 서비스 업체에 종속적이라고 일컫는다.
- 이는 곧 사용중인 플랫폼의 가격이나 정책, 서비스 변경에도 민감하게 반응해야됨을 의미한다. 제공업체를 변경하면 새로운 벤더 사양에 맞추기 위해 시스템을 업그레이드하는 비용이 발생할 수도 있다.

## 서버리스 아키텍처 제공업체
    네이버 클라우드: Cloud Functions
    Amazon: AWS Lambda
    Microsoft: Azure Functions
    Google: Google Cloud Functions

## 서버리스의 사용 사례

### 배치 작업
- `데이터를 실시간으로 처리하는게 아니라 일괄적으로 모아서 처리하는 작업인 배치 작업`의 경우, 24시간 운영되던 서버가 필요 없으며, 특정 시간에 수행되던 기능을 서버리스로 구현하면 효율적이다.

### 자동화 작업
- 넷플릭스는 동영상 업로드 시 파일의 인코딩과 검증, 태깅 이후에 공개되는 작업을 AWS Lambda 를 통해 자동화했다.
- 실시간 비디오 스트리밍 앱 개발사인 페리스코프도 동영상의 유해성 여부를 확인하는 기능을 Lambda 에서 운영하고 있다.

### 분석과 모니터링 기능
- CPU 사용량이 임계치에 도달했을 때 알림을 받거나 지속적으로 기록되는 로그를 분석하고 리포팅하는데 서버리스를 사용할 수 있다.
- 미국 온라인 패션 매거진 버슬은 하루 1억건의 이벤트 처리와 데이터 분석 리포팅에 서버리스를 적용해 84% 의 비용을 절감하였다.

### 챗봇 서비스
- 챗봇을 서버리스로 구현하면 API 호출 시 요청을 처리하고 요청을 처리하고 유연한 확장이 가능해 많은 사용자에게 안정적인 서비스를 제공할 수 있다.
- 슬랙(Slack)을 기반으로 하는 챗봇 어플리케이션이나 Amazon Echo 그리고 AWS Lambda를 이용한 음성인식 어플리케이션이 늘어나고 있다.

https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-%EC%84%9C%EB%B2%84%EB%A6%AC%EC%8A%A4ServerLess-%EA%B0%9C%EB%85%90-%F0%9F%92%AF-%EC%B4%9D%EC%A0%95%EB%A6%AC-BaaS-FaaS

